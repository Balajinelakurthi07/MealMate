{% extends 'base/base.html' %}
{% load static %}
{% load crispy_forms_tags %}



{% block 'body' %}

<div class="meal-plan">
 <div class="meal-plan-div1 d-flex justify-content-centre align-items-centre">
    <div class="meal-plan-div11">
    <h1 class="blur-background">Today's Meal Plan</h1>
     <form  method="post" style="" >
            {% csrf_token %}
            <div class="form-group">
               
                  <label for="target_calories">Target Calories:</label>
        <input type="number" class="form-control" id="target_calories" name="target_calories" placeholder="enter calories" value="{{ target_calories }}" required>
            </div>
            <div class="form-group">
                
               
        <label for="diet">Diet:</label>
        <br  />
        <select id="diet" name="diet">
            <option value="" {% if diet == "" %}selected{% endif %}></option>
            <option value="vegetarian" {% if diet == "vegetarian" %}selected{% endif %}>Vegetarian</option>
            <option value="vegan" {% if diet == "vegan" %}selected{% endif %}>Vegan</option>
            <option value="paleo" {% if diet == "paleo" %}selected{% endif %}>Non-Vegetarian</option>
            <option value="ketogenic" {% if diet == "ketogenic" %}selected{% endif %}>Ketogenic</option>
            <option value="gluten free" {% if diet == "gluten free" %}selected{% endif %}>Gluten Free</option>
            <!-- Add other diet options as needed -->
        </select>
            </div>
   
      
       <div class="d-flex justify-content-centre align-items-centre" style="margin-left:198px;">
        <button class="btn btn-dark" type="submit">Get Meal Plan</button>
    </div>

    </form>
    </div>
    </div>
    {% if meals %}
    <div class="meal-plan-div2 d-flex-column justify-content-centre align-items-centre">
        <h1 class="blur-background" style="width:200px; margin-left:650px;">Meals</h1>
        
          <div class="d-flex justify-content-centre align-items-centre" style="margin-left:50px; max-height:fit-content;">
            {% for meal in meals %}

                <div class="d-flex meal-item">
                <div class="card" style="width: 80%;   background-color: #77CDFF;">
                
       <img class="card-img-top" src="https://spoonacular.com/recipeImages/{{ meal.id }}-312x231.{{ meal.imageType }}" alt="Card image cap">
              <div class="card-body">

                    <h3>{{ meal.title }}</h3>
                    <p>Ready in {{ meal.readyInMinutes }} minutes</p>
                    <p>Servings: {{ meal.servings }}</p>
                    <a href="{{ meal.sourceUrl }}">View Recipe</a>
            
              </div>
           
        </div>
                </div>


            {% endfor %}
        </div>
        
</div>
<div class="meal-plan-div3 d-flex-column align-item-centre justify-content-centre">
 <div class="meal-plan-nutrient">
 <h1 class="blur-background">Nutrients</h1>
        <p>Calories: {{ nutrients.calories }}</p>
        <p>Carbohydrates: {{ nutrients.carbohydrates }}g</p>
        <p>Fat: {{ nutrients.fat }}g</p>
        <p>Protein: {{ nutrients.protein }}g</p>
        
    {% endif %}
 
</div>
 </div>
    </div>

{% endblock %}
